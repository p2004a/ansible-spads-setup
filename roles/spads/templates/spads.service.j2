[Unit]
Description=Spring Perl Autohost Dedicated Server
After=network.target

[Service]
Type=notify-reload
NotifyAccess=all
KillMode=mixed
TimeoutStopSec=2h
Restart=always
RestartSec=60s
User={{ spads_username }}
WorkingDirectory={{ spads_install_path }}/etc
EnvironmentFile={{ spads_install_path }}/secrets.env
ExecStartPre=-/usr/bin/find {{ spads_install_path }}/var/ClusterManager/ -maxdepth 1 -regextype posix-extended -regex '.*\.(launched|restarting|reloading|unloaded|running)$' -delete
ExecStart={{ spads_install_path }}/etc/spads_cluster_launcher.sh

[Install]
WantedBy=multi-user.target
